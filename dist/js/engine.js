var Engine=function(e){function a(){var e=Date.now(),t=(e-o)/1e3;if("play"==agame.state.currentMode)i(t),s();else{s();var n=game.state.checkMode(),m=game.state.getScreen(n);game.state[m](t)}o=e,p.requestAnimationFrame(a)}function t(){buttonPosition(),g(),o=Date.now(),mapTiles=[{repeat:1,tiles:[1]},{repeat:1,tiles:[4]},{repeat:1,tiles:[2]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[3]},{repeat:1,tiles:[5]}],agame=new Game(c.width,c.height,11,13,mapTiles),game.state.makeStartButton(),a()}function i(e){buttonPosition(),agame.entityHash.clear(),n(e);var a=agame.checkProximity(agame.player);a.forEach(function(e){agame.detectCollision(agame.player,e)})}function n(e){agame.allEnemies.forEach(function(a){agame.entityHash.insert(a.x,a.y,a),a.update(e,agame.map.bounds)}),agame.items.forEach(function(e){agame.entityHash.insert(e.x,e.y,e)}),agame.player.update(),agame.state.updateCoffeeTimer()}function s(){agame.state.renderHud(),agame.map.render(),m()}function m(){agame.items.forEach(function(e){e.render()}),agame.allEnemies.forEach(function(e){e.render()}),agame.player.render()}function g(){}var o,r=e.document,p=e.window,c=r.createElement("canvas"),d=c.getContext("2d");c.setAttribute("id","canvas"),c.width=1111,c.height=1345,r.body.appendChild(c),AudioResources.load(["sounds/traffic.mp3","sounds/crash.mp3","sounds/hit.mp3","sounds/trombone.mp3","sounds/boo.mp3","sounds/bell.mp3"]),AudioResources.onReady(),Resources.load(["images/enemy-bug.png","images/char-boy.png","images/hatch-left.png","images/default-block.png","images/hatch.png","images/sedan.png","images/coupe.png","images/van.png","images/semi1.png","images/semi2.png","images/semi3.png","images/semi-reverse1.png","images/semi-reverse2.png","images/semi-reverse3.png","images/man.png","images/coffee.png","images/building1.png","images/sidewalk-top.png","images/road.png","images/shoulder.png","images/sidewalk-bottom.png","images/target.png","images/life-indicator.png"]),Resources.onReady(t),e.ctx=d}(this);